<% display_type ||= "card" %>
<div class="row g-3 mb-3 justify-content-center">
  <% cards.each do |card| %>
    <% color_class =
      if card[:type] == :numeric
        card[:value].to_i == 0 ? "success" : "danger"
      else
        card[:value] == "Yes" ? "success" : "danger"
      end
    %>

    <% if display_type == "card" %>
      <div class="col-xxl-2 col-md-4 col-sm-6">
        <div class="card shadow-sm border-0 h-100 hover-lift" style="cursor:pointer; transition: transform 0.2s;" data-bs-toggle="collapse" data-bs-target="#support_agent_reports" aria-expanded="false" aria-controls="support_agent_reports">
          <div class="card-body d-flex align-items-center p-3">
            <div class="rounded-3 bg-<%= color_class %>-subtle d-flex align-items-center justify-content-center me-3" style="width: 48px; height: 48px; min-width: 48px;">
              <i class="<%= card[:icon] %> text-<%= color_class %> fs-4"></i>
            </div>
            <div>
              <h5 class="mb-0 fw-bold "><%= card[:value] %></h5>
              <small class="text-muted text-uppercase fw-semibold" style="font-size: 0.75rem;">
                <% if card[:type] == :numeric %>
                  <%= card[:value].to_i == 1 ? card[:subtitle].singularize : card[:subtitle] %>
                <% else %>
                  <%= card[:subtitle] %>
                <% end %>
              </small>
            </div>
          </div>
        </div>
      </div>
    <% else %>
      <div class="col-auto">
        <div class="d-inline-flex align-items-center bg-white border rounded-pill px-3 py-2 shadow-sm hover-shadow-md" style="cursor:pointer; transition: box-shadow 0.2s;" data-bs-toggle="collapse" data-bs-target="#support_agent_reports" aria-expanded="false" aria-controls="support_agent_reports">
          <i class="<%= card[:icon] %> text-<%= color_class %> me-2"></i>
          <span class="fw-medium text-secondary me-2">
            <% if card[:type] == :numeric %>
              <%= card[:value].to_i == 1 ? card[:subtitle].singularize : card[:subtitle] %>
            <% else %>
              <%= card[:subtitle] %>
            <% end %>
          </span>
          <span class="badge bg-<%= color_class %>-subtle text-<%= color_class %> rounded-pill px-2">
            <%= card[:value] %>
          </span>
        </div>
      </div>
    <% end %>
  <% end %>
</div>

<%= render partial: "/support_agent_reports/index", locals: { support_agent_reports: SupportAgentReport.where(owner:), hidden: true }  %>