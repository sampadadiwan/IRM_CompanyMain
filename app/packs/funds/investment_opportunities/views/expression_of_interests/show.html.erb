

<div class="card shadow mb-4">
  <div class="card-header py-3 d-flex align-items-center justify-content-between">
      <h6 class="m-0 font-weight-bold text-primary">Interest: <%= @expression_of_interest.investor.investor_name %></h6>
      <span>
        
      </span>
  </div>
  <div class="card-body show_details">
    <table class="table table-bordered dataTable">

      <tr>
        <td>
          Investment Fund
        </td>
        <td>
          <%= @expression_of_interest.entity.name %>
        </td>
      </tr>
      
      <tr>
        <td>
          Investment Opportunity
        </td>
        <td>
          <%= link_to @expression_of_interest.investment_opportunity.company_name,
            @expression_of_interest.investment_opportunity %>
        </td>
      </tr>

      <tr>
        <td>
          Investor Name
        </td>
        <td>
          <%= @expression_of_interest.investor_name.presence || @expression_of_interest.investor.investor_name %>
        </td>
      </tr>

      <% if @expression_of_interest.investor_email %>
      <tr>
        <td>
          Investor Email
        </td>
        <td>
          <%= @expression_of_interest.investor_email %>
        </td>
      </tr>
      <% end %>

      <tr>
        <td>
          KYC
        </td>
        <td>
          <%= link_to @expression_of_interest.investor_kyc if @expression_of_interest.investor_kyc %>
        </td>
      </tr>

      
      <tr>
        <td>
          Signatory
        </td>
        <td>
          <%= @expression_of_interest.investor_signatory.full_name if @expression_of_interest.investor_signatory %>
        </td>
      </tr>
      
      <tr>
        <td>
          Amount
        </td>
        <td>
          <%= money_to_currency @expression_of_interest.amount, params %>
        </td>
      </tr>
      <tr>
        <td>
          Approved
        </td>
        <td>
          <%= display_boolean @expression_of_interest.approved %>
        </td>
      </tr>
      <tr>
        <td>
          Verified
        </td>
        <td>
          <%= display_boolean @expression_of_interest.verified %>
        </td>
      </tr>
      <tr>
        <td>
          Allocation Percentage
        </td>
        <td>
          <%= @expression_of_interest.allocation_percentage %> %
        </td>
      </tr>
      <tr>
        <td>
          Allocation Amount
        </td>
        <td>
          <%= money_to_currency @expression_of_interest.allocation_amount, params %>
        </td>
      </tr>

      <tr>
        <td>
          Details
        </td>
        <td>
          <%= @expression_of_interest.details %>
        </td>
      </tr>

      <tr>
        <td>
          Created By
        </td>
        <td>
          <%= @expression_of_interest.user.full_name %>
        </td>
      </tr>
      


    </table>
  </div>
</div>


  <div>
    <% if policy(@expression_of_interest).update? %>
      <%= link_to  t_common(:edit) , edit_expression_of_interest_path(@expression_of_interest), {class: "btn btn-outline-primary" } %> 
      <%= button_to t_common(:delete) , @expression_of_interest, method: :delete, class: "btn btn-outline-danger" ,
          form_class: "deleteButton" , data: {action: "click->confirm#popup" , turbo:false} %>

      <%= link_to  "New KYC" , new_investor_kyc_path(owner_id: @expression_of_interest, owner_type: "ExpressionOfInterest", "investor_kyc[investor_id]": @expression_of_interest.investor_id, "investor_kyc[entity_id]": @expression_of_interest.entity_id), {class: "btn btn-outline-primary" } if @expression_of_interest.investor_kyc.nil? %>
    <% end %>

    <%= button_to "Generate Documents", 
        generate_documentation_expression_of_interest_path(@expression_of_interest), 
        method: :patch, class: "btn btn-outline-success" , 
        form_class: "deleteButton",data: {action: "click->confirm#popup", method: :patch,
        msg: "Generate Documents for this EOI from kyc and opportunity info. This will delete any previously generated documentation for this EOI. Proceed?"} if policy(@expression_of_interest).generate_documentation? %>

  </div>

  <%= render "expression_of_interests/details", expression_of_interest: @expression_of_interest %>