<% col_size ||= 12 %>
<%
    hide_show_btn ||= false
    params[:force_units] = investment_opportunity.default_currency_units
%>

<div class="col-md-4 mb-4">
    <div class="investment-opportunity-card">
        <div class="card-header-custom">
            <h3 class="company-title">
                <%= link_to investment_opportunity.company_name, investment_opportunity %>
            </h3>
            <% if investment_opportunity.logo.present? %>
                <%= image_tag investment_opportunity.logo.url(expires_in: 60*60*24*7), class: "company-logo" %>
            <% end %>
        </div>

        <div class="card-body-custom">
            <div class="metric-row">
                <div class="icon-wrapper blue">
                    <i class="ti ti-currency-dollar"></i>
                </div>
                <div class="metric-details">
                    <span class="metric-value"><%= money_to_currency investment_opportunity.fund_raise_amount, params %></span>
                    <span class="metric-label">Fund Raise Amount</span>
                </div>
            </div>

            <%
                if params[:force_units] == "Crores" && investment_opportunity.min_ticket_size.to_d < 100_00000
                    # If committed_amount is less than a crore, then show in lakhs
                    params[:force_units] = "Lakhs"
                end
            %>

            <div class="metric-row">
                <div class="icon-wrapper red">
                    <i class="ti ti-ticket"></i>
                </div>
                <div class="metric-details">
                    <span class="metric-value"><%= money_to_currency investment_opportunity.min_ticket_size, params %></span>
                    <span class="metric-label">Min Ticket Size</span>
                </div>
            </div>

            <div class="metric-row">
                <div class="icon-wrapper green">
                    <i class="ti ti-calendar"></i>
                </div>
                <div class="metric-details">
                    <span class="metric-value"><%= l investment_opportunity.last_date %></span>
                    <span class="metric-label">Last Date</span>
                </div>
            </div>

            <% if show_tags %>
                <% tags = investment_opportunity.tag_list&.split(",") %>
                <% if tags.present? %>
                    <div class="tags-section">
                        <% tags.each do |tag| %>
                            <%= link_to tag, investment_opportunities_path(tag:), class: "custom-badge" %>
                        <% end %>
                    </div>
                <% end %>
            <% end %>
        </div>

        <% unless hide_show_btn %>
            <div class="action-footer">
                <% link = policy(investment_opportunity).update? ? investment_opportunity_path(investment_opportunity) : investment_opportunity_path(investment_opportunity, preview: true) %>
                <%= link_to t_common(:show), link, class: "btn btn-outline-primary btn-custom" %>
            </div>
        <% end %>
    </div>
</div>

<% params[:force_units] = nil %>